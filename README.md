# Kubernetes configuration for Homelab

[![k3s](https://img.shields.io/badge/k3s-v1.20.4-orange?style=for-the-badge)](https://k3s.io/)
[![pre-commit](https://img.shields.io/badge/pre--commit-enabled-brightgreen?logo=pre-commit&logoColor=white&style=for-the-badge)](https://github.com/pre-commit/pre-commit)
[![renovate](https://img.shields.io/badge/renovate-enabled-brightgreen?style=for-the-badge&logo=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjUgNSAzNzAgMzcwIj48Y2lyY2xlIGN4PSIxODkiIGN5PSIxOTAiIHI9IjE4NCIgZmlsbD0iI2ZlMiIvPjxwYXRoIGZpbGw9IiM4YmIiIGQ9Ik0yNTEgMjU2bC0zOC0zOGExNyAxNyAwIDAxMC0yNGw1Ni01NmMyLTIgMi02IDAtN2wtMjAtMjFhNSA1IDAgMDAtNyAwbC0xMyAxMi05LTggMTMtMTNhMTcgMTcgMCAwMTI0IDBsMjEgMjFjNyA3IDcgMTcgMCAyNGwtNTYgNTdhNSA1IDAgMDAwIDdsMzggMzh6Ii8+PHBhdGggZmlsbD0iI2Q1MSIgZD0iTTMwMCAyODhsLTggOGMtNCA0LTExIDQtMTYgMGwtNDYtNDZjLTUtNS01LTEyIDAtMTZsOC04YzQtNCAxMS00IDE1IDBsNDcgNDdjNCA0IDQgMTEgMCAxNXoiLz48cGF0aCBmaWxsPSIjYjMwIiBkPSJNMjg1IDI1OGw3IDdjNCA0IDQgMTEgMCAxNWwtOCA4Yy00IDQtMTEgNC0xNiAwbC02LTdjNCA1IDExIDUgMTUgMGw4LTdjNC01IDQtMTIgMC0xNnoiLz48cGF0aCBmaWxsPSIjYTMwIiBkPSJNMjkxIDI2NGw4IDhjNCA0IDQgMTEgMCAxNmwtOCA3Yy00IDUtMTEgNS0xNSAwbC05LThjNSA1IDEyIDUgMTYgMGw4LThjNC00IDQtMTEgMC0xNXoiLz48cGF0aCBmaWxsPSIjZTYyIiBkPSJNMjYwIDIzM2wtNC00Yy02LTYtMTctNi0yMyAwLTcgNy03IDE3IDAgMjRsNCA0Yy00LTUtNC0xMSAwLTE2bDgtOGM0LTQgMTEtNCAxNSAweiIvPjxwYXRoIGZpbGw9IiNiNDAiIGQ9Ik0yODQgMzA0Yy00IDAtOC0xLTExLTRsLTQ3LTQ3Yy02LTYtNi0xNiAwLTIybDgtOGM2LTYgMTYtNiAyMiAwbDQ3IDQ2YzYgNyA2IDE3IDAgMjNsLTggOGMtMyAzLTcgNC0xMSA0em0tMzktNzZjLTEgMC0zIDAtNCAybC04IDdjLTIgMy0yIDcgMCA5bDQ3IDQ3YTYgNiAwIDAwOSAwbDctOGMzLTIgMy02IDAtOWwtNDYtNDZjLTItMi0zLTItNS0yeiIvPjxwYXRoIGZpbGw9IiMxY2MiIGQ9Ik0xNTIgMTEzbDE4LTE4IDE4IDE4LTE4IDE4em0xLTM1bDE4LTE4IDE4IDE4LTE4IDE4em0tOTAgODlsMTgtMTggMTggMTgtMTggMTh6bTM1LTM2bDE4LTE4IDE4IDE4LTE4IDE4eiIvPjxwYXRoIGZpbGw9IiMxZGQiIGQ9Ik0xMzQgMTMxbDE4LTE4IDE4IDE4LTE4IDE4em0tMzUgMzZsMTgtMTggMTggMTgtMTggMTh6Ii8+PHBhdGggZmlsbD0iIzJiYiIgZD0iTTExNiAxNDlsMTgtMTggMTggMTgtMTggMTh6bTU0LTU0bDE4LTE4IDE4IDE4LTE4IDE4em0tODkgOTBsMTgtMTggMTggMTgtMTggMTh6bTEzOS04NWwyMyAyM2M0IDQgNCAxMSAwIDE2TDE0MiAyNDBjLTQgNC0xMSA0LTE1IDBsLTI0LTI0Yy00LTQtNC0xMSAwLTE1bDEwMS0xMDFjNS01IDEyLTUgMTYgMHoiLz48cGF0aCBmaWxsPSIjM2VlIiBkPSJNMTM0IDk1bDE4LTE4IDE4IDE4LTE4IDE4em0tNTQgMThsMTgtMTcgMTggMTctMTggMTh6bTU1LTUzbDE4LTE4IDE4IDE4LTE4IDE4em05MyA0OGwtOC04Yy00LTUtMTEtNS0xNiAwTDEwMyAyMDFjLTQgNC00IDExIDAgMTVsOCA4Yy00LTQtNC0xMSAwLTE1bDEwMS0xMDFjNS00IDEyLTQgMTYgMHoiLz48cGF0aCBmaWxsPSIjOWVlIiBkPSJNMjcgMTMxbDE4LTE4IDE4IDE4LTE4IDE4em01NC01M2wxOC0xOCAxOCAxOC0xOCAxOHoiLz48cGF0aCBmaWxsPSIjMGFhIiBkPSJNMjMwIDExMGwxMyAxM2M0IDQgNCAxMSAwIDE2TDE0MiAyNDBjLTQgNC0xMSA0LTE1IDBsLTEzLTEzYzQgNCAxMSA0IDE1IDBsMTAxLTEwMWM1LTUgNS0xMSAwLTE2eiIvPjxwYXRoIGZpbGw9IiMxYWIiIGQ9Ik0xMzQgMjQ4Yy00IDAtOC0yLTExLTVsLTIzLTIzYTE2IDE2IDAgMDEwLTIzTDIwMSA5NmExNiAxNiAwIDAxMjIgMGwyNCAyNGM2IDYgNiAxNiAwIDIyTDE0NiAyNDNjLTMgMy03IDUtMTIgNXptNzgtMTQ3bC00IDItMTAxIDEwMWE2IDYgMCAwMDAgOWwyMyAyM2E2IDYgMCAwMDkgMGwxMDEtMTAxYTYgNiAwIDAwMC05bC0yNC0yMy00LTJ6Ii8+PC9zdmc+)](https://github.com/renovatebot/renovate)
[![GitHub issues](https://img.shields.io/github/issues/ebrianne/k3s-at-home?style=for-the-badge)](https://github.com/ebrianne/k3s-at-home/issues)
[![Falco](https://img.shields.io/badge/falco-protected-blue?style=for-the-badge&logo=data:image/png;base64,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)](https://github.com/renovatebot/renovate)

## Installation of Kubernetes using k3s

The distribution of choice is [k3s](https://k3s.io/) as it is lightweight and contains all of the features that are used for a homelab case.
I chose to do a [HA installation](https://rancher.com/docs/k3s/latest/en/installation/ha/) with 2 master nodes and 3 worker nodes. I use proxmox as the hypervisor layer and Ubuntu Server 20.04.

# Table of Contents
1. [Preparation](./docs/prereq.md)
2. [The Easy Way](./docs/theeasyway.md)
3. [The Hard Way](./docs/thehardway.md)
4. [Follow up](./docs/followup.md)
